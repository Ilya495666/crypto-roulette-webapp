<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Roulette</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: #1a1a2e;
            color: white;
            margin: 0;
            padding: 20px;
            text-align: center;
        }

        .wheel-container {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 30px auto;
        }

        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            transition: transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99);
            transform: rotate(0deg);
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }

        .spin-btn {
            background: linear-gradient(135deg, #0088cc, #00cc88);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 25px;
            cursor: pointer;
            margin-top: 20px;
            box-shadow: 0 4px 15px rgba(0, 136, 204, 0.3);
            transition: all 0.3s;
        }

        .spin-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 136, 204, 0.4);
        }

        .result {
            margin-top: 20px;
            font-size: 20px;
            padding: 15px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
        }
    </style>
</head>
<body>
    <h1>üé∞ Crypto Roulette</h1>
    <p>–ö–∞–∂–¥—ã–π —Å–ø–∏–Ω —Å—Ç–æ–∏—Ç <b>0.6 TON</b></p>

    <div class="wheel-container">
        <div class="wheel" id="wheel"></div>
    </div>

    <button class="spin-btn" id="spinBtn">–ö—Ä—É—Ç–∏—Ç—å —Ä—É–ª–µ—Ç–∫—É</button>
    <div class="result" id="result"></div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–∑–æ–≤
        const prizes = {
            "BTC": { color: "#F7931A", value: 0.000004 },
            "TON": { color: "#0088CC", value: 0.233 },
            "ETH": { color: "#627EEA", value: 0.000212 },
            "USDT": { color: "#26A17B", value: 1.2 },
            "DOGE": { color: "#CBAE5B", value: 3.02 }
        };

        const wheel = document.getElementById('wheel');
        const spinBtn = document.getElementById('spinBtn');
        const resultDiv = document.getElementById('result');

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä—É–ª–µ—Ç–∫–∏
        function initWheel() {
            const cryptoList = Object.keys(prizes);
            const sectorAngle = 360 / cryptoList.length;

            cryptoList.forEach((crypto, index) => {
                const sector = document.createElement('div');
                sector.style.position = 'absolute';
                sector.style.width = '100%';
                sector.style.height = '100%';
                sector.style.backgroundColor = prizes[crypto].color;
                sector.style.clipPath = `polygon(50% 50%, ${calcPoint(index, sectorAngle, 50)}% ${calcPoint(index, sectorAngle, 50, false)}%, ${calcPoint(index + 1, sectorAngle, 50)}% ${calcPoint(index + 1, sectorAngle, 50, false)}%)`;

                const label = document.createElement('div');
                label.textContent = crypto;
                label.style.position = 'absolute';
                label.style.left = '50%';
                label.style.top = '50%';
                label.style.transformOrigin = '0 0';
                label.style.transform = `rotate(${index * sectorAngle + sectorAngle/2}deg) translateX(120px) rotate(${-(index * sectorAngle + sectorAngle/2)}deg)`;

                sector.appendChild(label);
                wheel.appendChild(sector);
            });
        }

        function calcPoint(index, angle, radius, isX = true) {
            const rad = (index * angle - 90) * Math.PI / 180;
            return 50 + (isX ? Math.cos(rad) : Math.sin(rad)) * radius;
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏
        spinBtn.addEventListener('click', () => {
            spinBtn.disabled = true;
            const spinDegrees = 1800 + Math.floor(Math.random() * 360);
            wheel.style.transform = `rotate(${-spinDegrees}deg)`;

            setTimeout(() => {
                const cryptoList = Object.keys(prizes);
                const sectorAngle = 360 / cryptoList.length;
                const winningIndex = Math.floor((spinDegrees % 360) / sectorAngle);
                const winningCrypto = cryptoList[winningIndex];

                resultDiv.innerHTML = `
                    <h2>üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</h2>
                    <p>–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏: <b>${prizes[winningCrypto].value} ${winningCrypto}</b></p>
                `;

                spinBtn.disabled = false;

                // –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ –±–æ—Ç–∞
                if (Telegram.WebApp.sendData) {
                    Telegram.WebApp.sendData(JSON.stringify({
                        currency: winningCrypto,
                        amount: prizes[winningCrypto].value
                    }));
                }
            }, 4000);
        });

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        Telegram.WebApp.ready();
        Telegram.WebApp.expand();
        initWheel();
    </script>
</body>
</html>
